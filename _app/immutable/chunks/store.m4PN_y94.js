import{z as A,q as o,y as I,Z as N,H as R,C as S,v as m,D as v,G as h,J as g,K as p,E as D,_ as k,n as b,a as q,$ as x,S as C,g as F,a0 as H}from"./runtime.B70LyI_i.js";function w(s,n,u=!1){o&&I();var e=s,r=null,a=null,i=k,y=u?N:0,c=!1;const E=(l,t=!0)=>{c=!0,_(t,l)},_=(l,t)=>{if(i===(i=l))return;let d=!1;if(o){const T=e.data===R;!!i===T&&(e=S(),m(e),v(!1),d=!0)}i?(r?h(r):t&&(r=g(()=>t(e))),a&&p(a,()=>{a=null})):(a?h(a):t&&(a=g(()=>t(e))),r&&p(r,()=>{r=null})),d&&v(!0)};A(()=>{c=!1,n(E),c||_(null,null)},y),o&&(e=D)}function L(s,n,u){if(s==null)return n(void 0),b;const e=q(()=>s.subscribe(n,u));return e.unsubscribe?()=>e.unsubscribe():e}let f=!1;function z(s,n,u){const e=u[n]??(u[n]={store:null,source:C(void 0),unsubscribe:b});if(e.store!==s)if(e.unsubscribe(),e.store=s,s==null)e.source.v=void 0,e.unsubscribe=b;else{var r=!0;e.unsubscribe=L(s,a=>{r?e.source.v=a:H(e.source,a)}),r=!1}return F(e.source)}function G(){const s={};return x(()=>{for(var n in s)s[n].unsubscribe()}),s}function J(s){var n=f;try{return f=!1,[s(),f]}finally{f=n}}export{z as a,J as c,w as i,G as s};
